import{u as N,r as _,b as w,j as e,H as S,L as E}from"./app-CsPuMaPE.js";import{A as q}from"./AuthenticatedLayout-DLvna0tA.js";/* empty css            */import"./transition-Bs_woZCa.js";function B(){const{customer:t={},basePath:i="admin",flash:d={}}=N().props,[c,o]=_.useState(d.success||null),[p,h]=_.useState("bg-green-600"),{data:l,setData:s,put:y,processing:v,errors:b}=w({full_name:t.full_name||"",phone:t.phone||"",email:t.email||"",marital_status:t.marital_status||"",gender:t.gender||"",house_no:t.house_no||"",community:t.community||"",location:t.location||"",district:t.district||"",postal_address:t.postal_address||"",workplace:t.workplace||"",profession:t.profession||"",employer:t.employer||"",bank:t.bank||"",bank_branch:t.bank_branch||"",has_bank_loan:!!t.has_bank_loan,bank_monthly_deduction:t.bank_monthly_deduction||"",take_home:t.take_home||"",loan_amount_requested:t.loan_amount_requested||"",loan_purpose:t.loan_purpose||"",status:t.status||"inactive",guarantors:t.guarantors?.length>0?t.guarantors.map(a=>({id:a.id||null,name:a.name||"",occupation:a.occupation||"",residence:a.residence||"",contact:a.contact||""})):[{name:"",occupation:"",residence:"",contact:""}]}),f=()=>s("guarantors",[...l.guarantors,{name:"",occupation:"",residence:"",contact:""}]),C=a=>s("guarantors",l.guarantors.filter((r,u)=>u!==a)),x=(a,r,u)=>{const j=[...l.guarantors];j[a][r]=u,s("guarantors",j)},k=a=>{a.preventDefault(),y(route(`${i}.customers.update`,t.id),{preserveScroll:!0,onSuccess:()=>{o("✅ Customer updated successfully!"),h("bg-green-600"),setTimeout(()=>o(null),2500)},onError:r=>{o(Object.values(r)[0]||"⚠️ Failed to update customer."),h("bg-red-600"),setTimeout(()=>o(null),3e3)}})};return e.jsxs(q,{header:e.jsx("h2",{className:"text-xl font-semibold text-gray-800",children:"Edit Customer"}),children:[e.jsx(S,{title:`Edit ${t.full_name??"Customer"}`}),c&&e.jsx("div",{className:`fixed top-5 right-5 z-50 ${p} text-white px-4 py-3 rounded-lg shadow-lg`,children:c}),e.jsx("div",{className:"max-w-5xl mx-auto py-8 px-4 sm:px-6 lg:px-8",children:e.jsxs("div",{className:"bg-white shadow-lg rounded-lg p-6 space-y-6",children:[e.jsx("h1",{className:"text-2xl font-bold text-gray-800 mb-6",children:"✏️ Edit Customer Details"}),e.jsxs("form",{onSubmit:k,className:"space-y-6",children:[e.jsx(m,{title:"Personal Information",children:e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsx(n,{label:"Full Name",value:l.full_name,onChange:a=>s("full_name",a),error:b.full_name,required:!0}),e.jsx(n,{label:"Phone",value:l.phone,onChange:a=>s("phone",a),error:b.phone}),e.jsx(n,{label:"Email",type:"email",value:l.email,onChange:a=>s("email",a),error:b.email}),e.jsx(g,{label:"Marital Status",value:l.marital_status,onChange:a=>s("marital_status",a),options:[{value:"",label:"Select"},{value:"single",label:"Single"},{value:"married",label:"Married"}]}),e.jsx(g,{label:"Gender",value:l.gender,onChange:a=>s("gender",a),options:[{value:"",label:"Select"},{value:"M",label:"Male"},{value:"F",label:"Female"}]}),e.jsx(g,{label:"Status",value:l.status,onChange:a=>s("status",a),options:[{value:"active",label:"Active"},{value:"inactive",label:"Inactive"},{value:"suspended",label:"Suspended"}]})]})}),e.jsx(m,{title:"Address Information",children:e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsx(n,{label:"House No",value:l.house_no,onChange:a=>s("house_no",a)}),e.jsx(n,{label:"Community",value:l.community,onChange:a=>s("community",a)}),e.jsx(n,{label:"Location (Town/City)",value:l.location,onChange:a=>s("location",a)}),e.jsx(n,{label:"District",value:l.district,onChange:a=>s("district",a)}),e.jsx(n,{label:"Postal Address",value:l.postal_address,onChange:a=>s("postal_address",a)})]})}),e.jsx(m,{title:"Work & Income",children:e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsx(n,{label:"Workplace",value:l.workplace,onChange:a=>s("workplace",a)}),e.jsx(n,{label:"Profession",value:l.profession,onChange:a=>s("profession",a)}),e.jsx(n,{label:"Employer",value:l.employer,onChange:a=>s("employer",a)}),e.jsx(n,{label:"Bank",value:l.bank,onChange:a=>s("bank",a)}),e.jsx(n,{label:"Bank Branch",value:l.bank_branch,onChange:a=>s("bank_branch",a)}),e.jsx(F,{label:"Has Bank Loan",checked:l.has_bank_loan,onChange:a=>s("has_bank_loan",a)}),e.jsx(n,{type:"number",label:"Bank Monthly Deduction (₵)",value:l.bank_monthly_deduction,onChange:a=>s("bank_monthly_deduction",a)}),e.jsx(n,{type:"number",label:"Take Home (₵)",value:l.take_home,onChange:a=>s("take_home",a)})]})}),e.jsx(m,{title:"Loan Request Information",children:e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsx(n,{type:"number",label:"Loan Amount Requested (₵)",value:l.loan_amount_requested,onChange:a=>s("loan_amount_requested",a)}),e.jsx(n,{label:"Loan Purpose",value:l.loan_purpose,onChange:a=>s("loan_purpose",a)})]})}),e.jsxs(m,{title:"Guarantors",children:[e.jsxs("div",{className:"flex justify-between mb-3",children:[e.jsx("h3",{className:"text-gray-800 font-semibold",children:"Edit Guarantors"}),e.jsx("button",{type:"button",onClick:f,className:"text-blue-600 hover:underline",children:"+ Add Guarantor"})]}),l.guarantors.map((a,r)=>e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4 mb-3 border-b pb-3",children:[e.jsx("input",{className:"border rounded w-full p-2 bg-white text-gray-900",placeholder:"Name *",value:a.name,onChange:u=>x(r,"name",u.target.value),required:!0}),e.jsx("input",{className:"border rounded w-full p-2 bg-white text-gray-900",placeholder:"Occupation",value:a.occupation,onChange:u=>x(r,"occupation",u.target.value)}),e.jsx("input",{className:"border rounded w-full p-2 bg-white text-gray-900",placeholder:"Residence",value:a.residence,onChange:u=>x(r,"residence",u.target.value)}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx("input",{className:"border rounded w-full p-2 bg-white text-gray-900 flex-1",placeholder:"Contact",value:a.contact,onChange:u=>x(r,"contact",u.target.value)}),r>0&&e.jsx("button",{type:"button",onClick:()=>C(r),className:"px-3 py-1 border rounded text-sm text-gray-700 hover:bg-gray-100",children:"Remove"})]})]},r))]}),e.jsxs("div",{className:"flex justify-between items-center pt-4 border-t",children:[e.jsx(E,{href:route(`${i}.customers.index`),className:"text-gray-600 hover:underline",children:"← Back to Customers"}),e.jsx("button",{type:"submit",disabled:v,className:"px-6 py-2 bg-blue-600 hover:bg-blue-700 text-white rounded disabled:opacity-50 transition",children:v?"Saving...":"Update Customer"})]})]})]})})]})}function m({title:t,children:i}){return e.jsxs("section",{className:"mt-4",children:[e.jsx("h2",{className:"text-lg font-semibold mb-3 text-gray-800",children:t}),i]})}function n({label:t,value:i,onChange:d,type:c="text",error:o,required:p}){return e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm text-gray-700",children:t}),e.jsx("input",{type:c,value:i,onChange:h=>d(h.target.value),required:p,className:"border rounded w-full p-2 bg-white text-gray-900"}),o&&e.jsx("p",{className:"text-red-600 text-xs mt-1",children:o})]})}function g({label:t,value:i,onChange:d,options:c}){return e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm text-gray-700",children:t}),e.jsx("select",{value:i,onChange:o=>d(o.target.value),className:"border rounded w-full p-2 bg-white text-gray-900",children:c.map(o=>e.jsx("option",{value:o.value,children:o.label},o.value))})]})}function F({label:t,checked:i,onChange:d}){return e.jsxs("div",{className:"flex items-center gap-2 mt-6",children:[e.jsx("input",{type:"checkbox",checked:i,onChange:c=>d(c.target.checked),className:"h-5 w-5 text-blue-600"}),e.jsx("label",{className:"text-sm text-gray-700",children:t})]})}export{B as default};
